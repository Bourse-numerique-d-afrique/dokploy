# =============================================================================
# Production Environment Variables - Server 2: Clearing House
# Domain: payments.boursenumeriquedafrique.com
# =============================================================================
# Copy this file to .env.clearing-house and fill in the actual values
# Never commit .env.clearing-house to git!
# =============================================================================

# Version to deploy (use specific versions in production, 'latest' in staging)
VERSION=v0.1.2

# =============================================================================
# Database Configuration (Connects to Server 1)
# =============================================================================
# IMPORTANT: POSTGRES_HOST must be the private IP or domain of Server 1
# Example with private IP: POSTGRES_HOST=10.116.0.2
# Example with private domain: POSTGRES_HOST=exchange-db.internal
# Example with VPN: POSTGRES_HOST=exchange-server.tailscale

# OPTION 1: Private IP (DigitalOcean VPC, AWS VPC, etc.)
POSTGRES_HOST=10.x.x.x

# OPTION 2: Public domain with SSL (less secure, use firewall rules)
# POSTGRES_HOST=api.boursenumeriquedafrique.com

# OPTION 3: Managed database (recommended for production)
# POSTGRES_HOST=your-db-cluster.region.db.cloud.com

POSTGRES_PORT=5432
POSTGRES_USER=exchange_user
POSTGRES_PASSWORD=SAME_AS_SERVER_1_PASSWORD
POSTGRES_DATABASE=exchange

# =============================================================================
# Authentication & Security
# =============================================================================
# CRITICAL: These MUST match Server 1 exactly!
TOKEN_ISSUER=boursenumeriquedafrique
JWT_SECRET=SAME_JWT_SECRET_AS_SERVER_1

# =============================================================================
# MTN Mobile Money Configuration
# =============================================================================
# Same credentials as Server 1
MTN_URL=https://momodeveloper.mtn.com
MTN_COLLECTION_PRIMARY_KEY=YOUR_MTN_COLLECTION_PRIMARY_KEY
MTN_COLLECTION_SECONDARY_KEY=YOUR_MTN_COLLECTION_SECONDARY_KEY
MTN_DISBURSEMENT_PRIMARY_KEY=YOUR_MTN_DISBURSEMENT_PRIMARY_KEY
MTN_DISBURSEMENT_SECONDARY_KEY=YOUR_MTN_DISBURSEMENT_SECONDARY_KEY

# This server's domain (where MTN sends callbacks)
MTN_WEBHOOK_HOST=payments.boursenumeriquedafrique.com

# =============================================================================
# Airtel Money Configuration
# =============================================================================
# Same credentials as Server 1
AIRTEL_CLIENT_ID=YOUR_AIRTEL_CLIENT_ID
AIRTEL_CLIENT_SECRET=YOUR_AIRTEL_CLIENT_SECRET
AIRTEL_ENVIRONMENT=production
AIRTEL_CALLBACK_URL=https://payments.boursenumeriquedafrique.com/airtel/callback
AIRTEL_DISBURSEMENT_PIN=YOUR_AIRTEL_PIN

# =============================================================================
# Monitoring Configuration
# =============================================================================
PROMETHEUS_ENABLED=false

# =============================================================================
# Network Security Notes
# =============================================================================
# 1. Firewall Rules:
#    - Allow inbound: 8500 (main), 5705 (MTN), 5706 (Airtel)
#    - Allow outbound: 5432 to Server 1 (database), 443 (payment APIs)
#    - Deny all other traffic
#
# 2. Database Connection:
#    - Use private network (VPC) for database connection
#    - Enable SSL/TLS for database connections
#    - Use strong password or certificate authentication
#
# 3. Payment Provider Webhooks:
#    - Configure MTN webhook: https://payments.boursenumeriquedafrique.com:5705
#    - Configure Airtel callback: https://payments.boursenumeriquedafrique.com:5706
#    - Use HTTPS with valid SSL certificates
#    - Implement webhook signature verification
